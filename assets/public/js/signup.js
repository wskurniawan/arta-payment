var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function r(e){e.forEach(n)}function a(e){return"function"==typeof e}function u(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function i(e,n){e.appendChild(n)}function o(e,n,t){e.insertBefore(n,t||null)}function s(e){e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function l(e){return document.createTextNode(e)}function d(){return l(" ")}function p(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function f(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function m(e,n,t){e.style.setProperty(n,t)}let g;function h(e){g=e}const _=[],$=Promise.resolve();let v=!1;const k=[],x=[],y=[];function b(e){x.push(e)}function N(){const e=new Set;do{for(;_.length;){const e=_.shift();h(e),w(e.$$)}for(;k.length;)k.shift()();for(;x.length;){const n=x.pop();e.has(n)||(n(),e.add(n))}}while(_.length);for(;y.length;)y.pop()();v=!1}function w(e){e.fragment&&(e.update(e.dirty),r(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(b))}let T;function E(e,t,u){const{fragment:i,on_mount:o,on_destroy:s,after_render:c}=e.$$;i.m(t,u),b(()=>{const t=o.map(n).filter(a);s?s.push(...t):r(t),e.$$.on_mount=[]}),c.forEach(b)}function C(e,n){e.$$.dirty||(_.push(e),v||(v=!0,$.then(N)),e.$$.dirty=t()),e.$$.dirty[n]=!0}function L(n,a,u,i,o,s){const c=g;h(n);const l=a.props||{},d=n.$$={fragment:null,ctx:null,props:s,update:e,not_equal:o,bound:t(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(c?c.$$.context:[]),callbacks:t(),dirty:null};let p=!1;var f;d.ctx=u?u(n,l,(e,t)=>{d.ctx&&o(d.ctx[e],d.ctx[e]=t)&&(d.bound[e]&&d.bound[e](t),p&&C(n,e))}):l,d.update(),p=!0,r(d.before_render),d.fragment=i(d.ctx),a.target&&(a.hydrate?d.fragment.l((f=a.target,Array.from(f.childNodes))):d.fragment.c(),a.intro&&n.$$.fragment.i&&n.$$.fragment.i(),E(n,a.target,a.anchor),N()),h(c)}class A{$destroy(){var n,t;t=!0,(n=this).$$&&(r(n.$$.on_destroy),n.$$.fragment.d(t),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}function M(n){var t;return{c(){(t=c("div")).innerHTML="<div uk-spinner></div>",t.className="uk-flex uk-flex-center uk-flex-middle",m(t,"padding","24px")},m(e,n){o(e,t,n)},p:e,i:e,o:e,d(e){e&&s(t)}}}class H extends A{constructor(e){super(),L(this,e,null,M,u,[])}}function O(e){var n;return{c(){(n=c("div")).innerHTML='<p>Registeration success, click <a href="/app/login">here</a> to login!</p>',n.className="uk-alert-success",f(n,"uk-alert","")},m(e,t){o(e,n,t)},d(e){e&&s(n)}}}function P(e){var n,t,r,a,u;return{c(){n=c("div"),t=c("p"),r=l("Registeration failed, "),a=l(e.error_message),u=l("!"),n.className="uk-alert-danger",f(n,"uk-alert","")},m(e,s){o(e,n,s),i(n,t),i(t,r),i(t,a),i(t,u)},p(e,n){var t,r;e.error_message&&(t=a,r=""+(r=n.error_message),t.data!==r&&(t.data=r))},d(e){e&&s(n)}}}function S(n){var t,r=new H({});return{c(){r.$$.fragment.c()},m(e,n){E(r,e,n),t=!0},p:e,i(e){t||(r.$$.fragment.i(e),t=!0)},o(e){r.$$.fragment.o(e),t=!1},d(e){r.$destroy(e)}}}function j(n){var t,r;return{c(){(t=c("button")).textContent="SIGN UP",t.className="uk-align-center uk-button uk-button-default ws-blue-btn",r=p(t,"click",n.do_signup)},m(e,n){o(e,t,n)},p:e,i:e,o:e,d(e){e&&s(t),r()}}}function F(e){var n,t,a,u,l,g,h,_,$,v,k,x,y,b,N,w,E,C,L,A,M,H,F,R,U=e.alert.success&&O(),Y=e.alert.fail&&P(e),q=[j,S],B=[];function G(e){return e.loading_signup?1:0}return L=G(e),A=B[L]=q[L](e),{c(){n=c("div"),t=c("div"),U&&U.c(),a=d(),Y&&Y.c(),u=d(),l=c("div"),g=c("div"),(h=c("div")).innerHTML='<img src="/assets/public/img/logo_arta.png" alt="logo">',_=d(),($=c("h5")).innerHTML="<b>CREATE NEW ACCOUNT</b>",v=d(),k=c("div"),x=c("div"),y=c("input"),b=d(),N=c("input"),w=d(),E=c("input"),C=d(),A.c(),M=d(),(H=c("div")).innerHTML='<span>Already have an account? Sign in <a href="/app/login">here!</a></span>',h.className="uk-flex uk-flex-center",$.className="uk-text-center",y.className="uk-input",y.placeholder="Your Name or Company Name",f(y,"type","text"),m(y,"margin-bottom","12px"),N.className="uk-input",N.placeholder="Your Email",f(N,"type","email"),m(N,"margin-bottom","12px"),E.className="uk-input",f(E,"type","password"),E.placeholder="Password",x.className="uk-width-2-3@m uk-width-1-1@s",k.className="uk-flex uk-flex-center",H.className="uk-text-center",g.className="uk-card-body",l.className="uk-card uk-card-default",m(l,"background-color","#F0F2F2"),t.className="uk-width-2-5@m uk-width-1-1@s",m(t,"padding","12px"),n.className="uk-width-1-1 uk-height-viewport uk-flex uk-flex-center uk-flex-middle",R=[p(y,"input",e.input0_input_handler),p(N,"input",e.input1_input_handler),p(E,"input",e.input2_input_handler)]},m(r,s){o(r,n,s),i(n,t),U&&U.m(t,null),i(t,a),Y&&Y.m(t,null),i(t,u),i(t,l),i(l,g),i(g,h),i(g,_),i(g,$),i(g,v),i(g,k),i(k,x),i(x,y),y.value=e.form_input.name,i(x,b),i(x,N),N.value=e.form_input.email,i(x,w),i(x,E),E.value=e.form_input.password,i(x,C),B[L].m(x,null),i(g,M),i(g,H),F=!0},p(e,n){n.alert.success?U||((U=O()).c(),U.m(t,a)):U&&(U.d(1),U=null),n.alert.fail?Y?Y.p(e,n):((Y=P(n)).c(),Y.m(t,u)):Y&&(Y.d(1),Y=null),e.form_input&&y.value!==n.form_input.name&&(y.value=n.form_input.name),e.form_input&&(N.value=n.form_input.email),e.form_input&&(E.value=n.form_input.password);var i,o=L;(L=G(n))===o?B[L].p(e,n):(i=(()=>{B[o].d(1),B[o]=null}),(T={remaining:0,callbacks:[]}).callbacks.push(i),A.o(1),T.remaining||r(T.callbacks),(A=B[L])||(A=B[L]=q[L](n)).c(),A.i(1),A.m(x,null))},i(e){F||(A&&A.i(),F=!0)},o(e){A&&A.o(),F=!1},d(e){e&&s(n),U&&U.d(),Y&&Y.d(),B[L].d(),r(R)}}}function R(e,n,t){const r={success:!1,fail:!1};var a="";const u={name:"",email:"",password:""};var i=!1;return{alert:r,error_message:a,form_input:u,loading_signup:i,do_signup:function(){t("loading_signup",i=!0),r.success=!1,t("alert",r),r.fail=!1,t("alert",r),fetch("/account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(e=>(t("loading_signup",i=!1),e.ok?(r.success=!0,t("alert",r)):(r.fail=!0,t("alert",r),t("error_message",a=e.statusText)),e.json())).then(e=>{e.success||"validation_error"==e.error||t("error_message",a=e.message)}).catch(e=>{r.fail=!0,t("alert",r),t("error_message",a=e.message),t("loading_signup",i=!1)})},input0_input_handler:function(){u.name=this.value,t("form_input",u)},input1_input_handler:function(){u.email=this.value,t("form_input",u)},input2_input_handler:function(){u.password=this.value,t("form_input",u)}}}return new class extends A{constructor(e){super(),L(this,e,R,F,u,[])}}({target:document.body,props:{name:"signup"}})}();
//# sourceMappingURL=signup.js.map
