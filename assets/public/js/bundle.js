var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function r(e){e.forEach(n)}function o(e){return"function"==typeof e}function a(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function i(e,n){e.appendChild(n)}function s(e,n,t){e.insertBefore(n,t||null)}function u(e){e.parentNode.removeChild(e)}function l(e){return document.createElement(e)}function c(e){return document.createTextNode(e)}function d(){return c(" ")}function f(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function p(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function m(e,n,t){e.style.setProperty(n,t)}let g;function h(e){g=e}const _=[],$=Promise.resolve();let k=!1;const v=[],x=[],b=[];function y(e){x.push(e)}function w(){const e=new Set;do{for(;_.length;){const e=_.shift();h(e),N(e.$$)}for(;v.length;)v.shift()();for(;x.length;){const n=x.pop();e.has(n)||(n(),e.add(n))}}while(_.length);for(;b.length;)b.pop()();k=!1}function N(e){e.fragment&&(e.update(e.dirty),r(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(y))}let L;function T(e,t,a){const{fragment:i,on_mount:s,on_destroy:u,after_render:l}=e.$$;i.m(t,a),y(()=>{const t=s.map(n).filter(o);u?u.push(...t):r(t),e.$$.on_mount=[]}),l.forEach(y)}function O(e,n){e.$$.dirty||(_.push(e),k||(k=!0,$.then(w)),e.$$.dirty=t()),e.$$.dirty[n]=!0}function C(n,o,a,i,s,u){const l=g;h(n);const c=o.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:e,not_equal:s,bound:t(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:t(),dirty:null};let f=!1;var p;d.ctx=a?a(n,c,(e,t)=>{d.ctx&&s(d.ctx[e],d.ctx[e]=t)&&(d.bound[e]&&d.bound[e](t),f&&O(n,e))}):c,d.update(),f=!0,r(d.before_render),d.fragment=i(d.ctx),o.target&&(o.hydrate?d.fragment.l((p=o.target,Array.from(p.childNodes))):d.fragment.c(),o.intro&&n.$$.fragment.i&&n.$$.fragment.i(),T(n,o.target,o.anchor),w()),h(l)}class E{$destroy(){var n,t;t=!0,(n=this).$$&&(r(n.$$.on_destroy),n.$$.fragment.d(t),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}function P(n){var t;return{c(){(t=l("div")).innerHTML="<div uk-spinner></div>",t.className="uk-flex uk-flex-center uk-flex-middle",m(t,"padding","24px")},m(e,n){s(e,t,n)},p:e,i:e,o:e,d(e){e&&u(t)}}}class S extends E{constructor(e){super(),C(this,e,null,P,a,[])}}function H(e){var n,t,r,o,a;return{c(){n=l("div"),t=l("p"),r=c("Login failed, "),o=c(e.error_message),a=c("!"),n.className="uk-alert-danger",p(n,"uk-alert","")},m(e,u){s(e,n,u),i(n,t),i(t,r),i(t,o),i(t,a)},p(e,n){var t,r;e.error_message&&(t=o,r=""+(r=n.error_message),t.data!==r&&(t.data=r))},d(e){e&&u(n)}}}function I(n){var t,r=new S({});return{c(){r.$$.fragment.c()},m(e,n){T(r,e,n),t=!0},p:e,i(e){t||(r.$$.fragment.i(e),t=!0)},o(e){r.$$.fragment.o(e),t=!1},d(e){r.$destroy(e)}}}function M(n){var t,r;return{c(){(t=l("button")).textContent="SIGN IN",t.className="uk-align-center uk-button uk-button-default ws-blue-btn",r=f(t,"click",n.do_login)},m(e,n){s(e,t,n)},p:e,i:e,o:e,d(e){e&&u(t),r()}}}function j(e){var n,t,o,a,c,g,h,_,$,k,v,x,b,y,w,N,T,O,C,E,P,S=e.alert.fail&&H(e),j=[M,I],A=[];function U(e){return e.loading_login?1:0}return N=U(e),T=A[N]=j[N](e),{c(){n=l("div"),t=l("div"),S&&S.c(),o=d(),a=l("div"),c=l("div"),(g=l("div")).innerHTML='<img src="/assets/public/img/logo_arta.png" alt="logo">',h=d(),(_=l("h5")).innerHTML="<b>LOGIN TO YOUR ACCOUNT</b>",$=d(),k=l("div"),v=l("div"),x=l("input"),b=d(),y=l("input"),w=d(),T.c(),O=d(),(C=l("div")).innerHTML='<span>Have no account yet? Create new account <a href="/app/signup" target="__blank">here!</a></span>',g.className="uk-flex uk-flex-center",_.className="uk-text-center",x.className="uk-input",x.placeholder="Your Email",p(x,"type","email"),m(x,"margin-bottom","12px"),y.className="uk-input",p(y,"type","password"),y.placeholder="Password",v.className="uk-width-2-3@m uk-width-1-1@s",k.className="uk-flex uk-flex-center",C.className="uk-text-center",c.className="uk-card-body",a.className="uk-card uk-card-default",m(a,"background-color","#F0F2F2"),t.className="uk-width-2-5@m uk-width-1-1@s",m(t,"padding","12px"),n.className="uk-width-1-1 uk-height-viewport uk-flex uk-flex-center uk-flex-middle",P=[f(x,"input",e.input0_input_handler),f(y,"input",e.input1_input_handler)]},m(r,u){s(r,n,u),i(n,t),S&&S.m(t,null),i(t,o),i(t,a),i(a,c),i(c,g),i(c,h),i(c,_),i(c,$),i(c,k),i(k,v),i(v,x),x.value=e.input_form.email,i(v,b),i(v,y),y.value=e.input_form.password,i(v,w),A[N].m(v,null),i(c,O),i(c,C),E=!0},p(e,n){n.alert.fail?S?S.p(e,n):((S=H(n)).c(),S.m(t,o)):S&&(S.d(1),S=null),e.input_form&&(x.value=n.input_form.email),e.input_form&&(y.value=n.input_form.password);var a,i=N;(N=U(n))===i?A[N].p(e,n):(a=(()=>{A[i].d(1),A[i]=null}),(L={remaining:0,callbacks:[]}).callbacks.push(a),T.o(1),L.remaining||r(L.callbacks),(T=A[N])||(T=A[N]=j[N](n)).c(),T.i(1),T.m(v,null))},i(e){E||(T&&T.i(),E=!0)},o(e){T&&T.o(),E=!1},d(e){e&&u(n),S&&S.d(),A[N].d(),r(P)}}}function A(e,n,t){let r="";const o=new URLSearchParams(window.location.search);t("session_id",r=o.get("sessionId"));const a={fail:!1};var i="";const s={email:"",password:""};var u=!1;return{alert:a,error_message:i,input_form:s,loading_login:u,do_login:function(){a.fail=!1,t("alert",a),t("loading_login",u=!0),fetch("/account/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>(t("loading_login",u=!1),e.ok||(a.fail=!0,t("alert",a),t("error_message",i=e.statusText)),e.json())).then(e=>{if(e.success){const n=new URLSearchParams;n.set("session",e.data.token),null!=r&&n.set("sessionId",r),window.location="/app/home?"+n}else"validation_error"!=e.error&&t("error_message",i=e.message)}).catch(e=>{t("loading_login",u=!1),a.fail=!0,t("alert",a),t("error_message",i=e.message)})},input0_input_handler:function(){s.email=this.value,t("input_form",s)},input1_input_handler:function(){s.password=this.value,t("input_form",s)}}}return new class extends E{constructor(e){super(),C(this,e,A,j,a,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
